(function(){tinymce.PluginManager.requireLangPack('buttons');tinymce.create('tinymce.plugins.ButtonsPlugin',{openDialog:function(ed,url,currentContent){ed.windowManager.open({file:url+'/dialog.htm',width:640,height:320,inline:1},{plugin_url:url,currentContent:currentContent});},init:function(ed,url){var t=this;this.url=url;ed.addCommand('mceButtons',function(){t.openDialog(ed,url);});ed.addButton('addbuttons',{title:'buttons.desc',cmd:'mceButtons',image:url+'/img/buttons.png'});ed.onInit.add(function(ed){ed.dom.setAttrib(tinyMCE.activeEditor.dom.select('ul.buttons'),'contenteditable','false');ed.dom.setAttrib(tinyMCE.activeEditor.dom.select('ul.buttons'),'data-mce-contenteditable','false');});ed.onSubmit.add(function(ed){ed.dom.setAttrib(tinyMCE.activeEditor.dom.select('ul.buttons'),'contenteditable',null);ed.dom.setAttrib(tinyMCE.activeEditor.dom.select('ul.buttons'),'data-mce-contenteditable',null);});ed.onClick.add(function(ed,e){if(buttons=t.isButtons(e.target)){buttons.parentNode.removeChild(buttons);t.openDialog(ed,t.url,e.target.innerHTML);}});},isButtons:function(element){if(element.id=='tinymce'){return false;}if(element.tagName=='UL'&&element.className=='buttons'){return element;}return this.isButtons(element.parentNode);},getInfo:function(){return{longname:'Buttons plugin',author:'Anthony Kuske',authorurl:'http://www.anthonykuske.com',infourl:'#',version:"1.0"};}});tinymce.PluginManager.add('buttons',tinymce.plugins.ButtonsPlugin);})();